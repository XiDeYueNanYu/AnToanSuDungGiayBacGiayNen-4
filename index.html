<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习越南语请联系Wx:XiDeYueNanYu</title>
    <style>
        body {
            background-color: #f7fbf3;
            margin-bottom: 60px;
        }
        #infoBox { 
            width: 100%; 
            max-width: 700px;
            height: 100px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: clamp(40px, 5vw, 60px);
            font-weight: bold;
        }
        #contactBox { 
            width: 100%; 
            max-width: 700px;
            height: 45px; 
            margin: 0px auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: clamp(12px, 2vw, 15px); 
            font-weight: bold;
        }
        .image-frame {
            max-width: 700px;
            margin: 20px auto 0 auto;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: none;
            overflow: hidden;
        }
        .image-frame img {
            width: 100%;
            height: auto;
            display: block;
        }
        .content-box {
            max-width: 700px;
            margin: 20px auto;
            padding: 50px;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 30px;
            font-family: Arial;
            color: #222322;
            line-height: 3;
            text-align: justify;
        }
        .translated-word {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 1.3;
            background-color: #bfcdbf;
            color: #000000;
            padding: 4px 4px;
            border-radius: 2px;
        }
        .translation {
            position: absolute;
            top: -29px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 18px;
            background-color: #eddabc;
            color: #313a2d;
            padding: 4px 4px;
            border-radius: 1px;
            white-space: nowrap;
            z-index: 1;
            line-height: 1;
        }
        .original {
            display: inline;
            line-height: 1;
        }
        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: block;
            z-index: 1000;
        }
        #audioPlayer {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .time-box-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .floating-controls p#timeDisplay {
            font-size: 28px;
            color: #FFFFFF;
            background-color: #000000;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0;
        }
        .floating-controls .time-box {
            font-size: 16px;
            color: #FFFFFF;
            background-color: #555555;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 60px;
        }
        .tua-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .control-button {
            width: 50px;
            height: 50px;
            background-color: #363535;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }
        .control-button:disabled {
            background-color: #888888;
            cursor: not-allowed;
        }
        .control-button:hover:not(:disabled) {
            background-color: #000000;
        }
        .pause-play-button {
            background-color: #FF4500;
        }
        .pause-play-button:hover {
            background-color: #CC3700;
        }
        .toggle-button {
            background-color: #4682B4;
        }
        .toggle-button:hover {
            background-color: #36648B;
        }
        .loop-button {
            background-color: #3c923c;
        }
        .loop-button:hover {
            background-color: #347d34;
        }
        .clear-button {
            background-color: #bc3f13;
        }
        .clear-button:hover {
            background-color: #d15124;
        }
        .active {
            background-color: #ffffff; 
            border-radius: 5px;
        }
        @media (max-width: 400px) {
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            .floating-controls p#timeDisplay {
                font-size: 20px;
            }
            .floating-controls .time-box {
                font-size: 12px;
                min-width: 50px;
            }
        }
        #quizContainer {
            display: none;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            color: #53686f;
            font-size: 25px;
            font-weight: bold;
        }
        .question {
            margin-bottom: 20px;
            padding: 18px;
            color: #53686f;
            border: 5px solid #53686f;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 15px 0;
            cursor: pointer;
            color: #21292c;
            font-size: 16px;
            font-weight: bold;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border: 5px solid #53686f;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            background-color: #ffffff;
            color: #007a33;
        }
        .wrong-answer {
            color: #f65936;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }
        #submitQuiz {
            font-family: Arial, sans-serif;
            padding: 10px 20px;
            border: 3px solid #53686f;
            background-color: #FF6820;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
        #submitQuiz:hover {
            background-color: #ff844a;
        }
        .floating-mode-bar {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #68838B;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
            width: 900px;
        }
        .mode-button {
            padding: 10px 20px;
            border: 0px solid #ccc;
            background: #95a8ad;
            color: #293437;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .mode-button.active {
            border: 2px solid #ffffff;
            background: #f0f0f0;
            color: #293437;
        }
        /* Mobile styles */
        @media (max-width: 768px) { 
            body {
                background-color: #f7fbf3;
                margin-bottom: 60px;
            }
            #infoBox { 
                width: 90%; 
                height: 120px; 
                margin: 0 auto; 
                border: 1px solid #ccc; 
                background: #68838B; 
                color: #D2B48C; 
                display: flex; 
                align-items: center; 
                justify-content: center; 
                font-size: 60px; 
                font-weight: bold;
            }
            #contactBox { 
                width: 90%; 
                height: 50px; 
                margin: 0px auto; 
                border: 1px solid #ccc; 
                background: #68838B; 
                color: #D2B48C; 
                display: flex; 
                align-items: center; 
                justify-content: left; 
                padding-left: 20px;
                font-size: 20px; 
                font-weight: bold;
            }
            .image-frame {
                width: 90%;
                max-width: 700px;
                margin: 10 screen auto 0 auto;
                border: 10px solid #957652;
                border-radius: 10px;
                background-color: #ffffff;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                display: none;
                overflow: hidden;
            }
            .image-frame img {
                width: 100%;
                height: auto;
                display: block;
            }
            .content-box {
                max-width: 700px;
                margin: 10px auto;
                padding: 20px;
                padding-top: 50px;
                padding-bottom: 90px;
                border: 10px solid #957652;
                border-radius: 10px;
                background-color: #ffffff;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                font-size: 19px;
                font-family: Arial;
                color: #222322;
                line-height: 3.5;
                text-align: justify;
            }
            .translated-word {
                position: relative;
                display: inline-block;
                white-space: nowrap;
                line-height: 1.3;
                background-color: #bfcdbf;
                color: #000000;
                padding: 3px 3px;
                border-radius: 2px;
            }
            .translation {
                position: absolute;
                top: -25px;
                left: 50%;
                transform: translateX(-50%);
                font-size: 13px;
                background-color: #eddabc;
                color: #313a2d;
                padding: 4px 4px;
                border-radius: 1px;
                white-space: nowrap;
                z-index: 1;
                line-height: 1;
            }
            .original {
                display: inline;
                line-height: 1;
            }
            .floating-controls {
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: #f0f0f0;
                padding: 10px;
                border-radius: 5px;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                text-align: center;
                display: block;
                z-index: 1000;
            }
            #audioPlayer {
                width: 100%;
                margin-bottom: 10px;
            }
            .time-row {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 10px;
                margin-bottom: 10px;
            }
            .time-box-group {
                display: flex;
                justify-content: center;
                gap: 10px;
            }
            .button-group {
                display: flex;
                justify-content: center;
                gap: 10px;
            }
            .floating-controls p#timeDisplay {
                font-size: 28px;
                color: #FFFFFF;
                background-color: #000000;
                padding: 5px 10px;
                border-radius: 5px;
                cursor: pointer;
                margin: 0;
            }
            .floating-controls .time-box {
                font-size: 16px;
                color: #FFFFFF;
                background-color: #555555;
                padding: 5px 10px;
                border-radius: 5px;
                min-width: 60px;
            }
            .tua-buttons {
                display: flex;
                justify-content: center;
                gap: 5px;
                margin-bottom: 10px;
                flex-wrap: wrap;
            }
            .action-buttons {
                display: flex;
                justify-content: center;
                gap: 10px;
            }
            .control-button {
                width: 50px;
                height: 50px;
                background-color: #363535;
                color: white;
                border: none;
                border-radius: 50%;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                display: inline-flex;
                justify-content: center;
                align-items: center;
            }
            .control-button:disabled {
                background-color: #888888;
                cursor: not-allowed;
            }
            .control-button:hover:not(:disabled) {
                background-color: #000000;
            }
            .pause-play-button {
                background-color: #FF4500;
            }
            .pause-play-button:hover {
                background-color: #CC3700;
            }
            .toggle-button {
                background-color: #4682B4;
            }
            .toggle-button:hover {
                background-color: #36648B;
            }
            .loop-button {
                background-color: #3c923c;
            }
            .loop-button:hover {
                background-color: #347d34;
            }
            .clear-button {
                background-color: #bc3f13;
            }
            .clear-button:hover {
                background-color: #d15124;
            }
            .active {
                background-color: #ffffff; 
                border-radius: 5px;
            }
            @media (max-width: 400px) {
                .control-button {
                    width: 40px;
                    height: 40px;
                    font-size: 14px;
                }
                .floating-controls p#timeDisplay {
                    font-size: 20px;
                }
                .floating-controls .time-box {
                    font-size: 12px;
                    min-width: 50px;
                }
            }
            #quizContainer {
                display: none;
                font-family: Arial, sans-serif;
                max-width: 800px;
                margin: 20px auto;
                padding: 20px;
                color: #53686f;
                font-size: 25px;
                font-weight: bold;
            }
            .question {
                margin-bottom: 20px;
                padding: 18px;
                color: #53686f;
                border: 5px solid #53686f;
                border-radius: 10px;
                background-color: #ffffff;
                font-size: 16px;
                font-weight: bold;
            }
            .options label {
                display: block;
                margin: 15px 0;
                cursor: pointer;
                color: #21292c;
                font-size: 16px;
                font-weight: bold;
            }
            #result {
                margin-top: 20px;
                padding: 10px;
                display: none;
                border: 5px solid #53686f;
                border-radius: 5px;
                font-size: 16px;
                font-weight: bold;
                background-color: #ffffff;
                color: #007a33;
            }
            .wrong-answer {
                color: #f65936;
                margin: 10px 0;
                font-size: 16px;
                font-weight: bold;
            }
            #submitQuiz {
                font-family: Arial, sans-serif;
                padding: 10px 20px;
                border: 3px solid #53686f;
                background-color: #FF6820;
                border-radius: 5px;
                color: white;
                cursor: pointer;
                font-size: 18px;
                font-weight: bold;
            }
            #submitQuiz:hover {
                background-color: #ff844a;
            }
            .floating-mode-bar {
                position: fixed;
                bottom: 0px;
                left: 50%;
                transform: translateX(-50%);
                background-color: #68838B;
                padding: 10px;
                border-radius: 5px;
                box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
                display: flex;
                justify-content: center;
                gap: 20px;
                z-index: 1000;
                width: 100%;
            }
            .mode-button {
                padding: 10px 20px;
                border: 0px solid #ccc;
                background: #95a8ad;
                color: #293437;
                font-size: 20px;
                font-weight: bold;
                cursor: pointer;
                border-radius: 5px;
                transition: border-color 0.3s;
            }
            .mode-button.active {
                border: 2px solid #ffffff;
                background: #f0f0f0;
                color: #293437;
            }
        }
    </style>
</head>
<body>
    <div id="infoBox">习得越南语</div>
    <div id="contactBox">讲师-阮玉煌 | Weixin：XiDeYueNanYu</div>
    <div id="contentContainer">
        <div class="image-frame" id="imageFrame">
            <img id="contentImage" src="" alt="Content Image">
        </div>
        <div class="content-box" id="content"></div>
    </div>
    <div id="quizContainer">
        <h1>回答下面问题</h1>
        <form id="quizForm">
            <div id="questions"></div>
            <button type="button" id="submitQuiz" onclick="checkAnswers()">提交</button>
        </form>
        <div id="result"></div>
    </div>
    <div class="floating-controls" id="floatingControls">
        <audio id="audioPlayer" src="lesson.mp3" controls></audio>
        <div class="time-row">
            <p id="timeDisplay">00:00</p>
            <div class="time-box-group">
                <span class="time-box" id="loopStart">--:--</span>
                <span class="time-box" id="loopEnd">--:--</span>
            </div>
            <div class="button-group">
                <button class="control-button loop-button" id="loopButton">听</button>
                <button class="control-button clear-button" id="clearButton">删</button>
            </div>
        </div>
        <div class="tua-buttons">
            <button class="control-button" id="rewind5sButton">-5s</button>
            <button class="control-button" id="rewind1sButton">-1s</button>
            <button class="control-button" id="forward1sButton">+1s</button>
            <button class="control-button" id="forward5sButton">+5s</button>
        </div>
        <div class="action-buttons">
            <button class="control-button pause-play-button" id="pausePlayButton">播</button>
            <button class="control-button toggle-button" id="toggleControlsButton">藏</button>
        </div>
    </div>
    <div class="floating-mode-bar">
        <button class="mode-button active" id="contentMode">内容</button>
        <button class="mode-button" id="quizMode">回答问题</button>
    </div>

    <script>

const textContentData = [
    `An toàn khi sử dụng giấy bạc và giấy nến trong nồi chiên không dầu.
   Trong bối cảnh nồi chiên không dầu ngày càng trở thành công cụ không thể thiếu trong gian bếp hiện đại của nhiều gia đình Việt Nam, việc sử dụng giấy bạc và giấy nến để chống dính đã trở thành thói quen phổ biến. Những vật liệu này không chỉ giúp hạn chế thực phẩm bám dính vào nồi, mà còn đơn giản hóa quá trình vệ sinh sau khi nấu nướng. Tuy nhiên, nhiều người lo ngại rằng việc tiếp xúc với nhiệt độ cao có thể khiến các loại giấy này phát tán chất độc hại vào thực phẩm, gây ảnh hưởng đến sức khỏe. Để làm rõ vấn đề này, Tiến sĩ Vũ Thị Tần, giảng viên chuyên ngành Hóa vô cơ tại Đại học Bách khoa Hà Nội, đã cung cấp những phân tích khoa học chi tiết, giúp người dùng hiểu rõ hơn về tính an toàn của giấy bạc và giấy nến.
    Giấy bạc, được chế tạo từ nhôm cán mỏng với thành phần gồm 98,5% nhôm, kết hợp cùng một lượng nhỏ sắt và silicone để tăng độ bền cơ học, là vật liệu phổ biến trong nấu nướng. Với khả năng chịu nhiệt lên đến 240–250ºC, giấy bạc thường được sử dụng để bọc thực phẩm khi nướng trong lò hoặc trên than, cũng như đựng thức ăn mang đi tại các nhà hàng ở nhiều quốc gia. Tuy nhiên, khi chế biến thực phẩm có tính axit cao như cà chua, chanh, hoặc giấm ở nhiệt độ cao, một lượng nhỏ nhôm có thể phân tán vào thực phẩm. Điều này khiến một số người lo lắng về nguy cơ tích lũy nhôm trong cơ thể, vốn được cho là liên quan đến các vấn đề sức khỏe như bệnh mất trí nhớ hoặc bệnh thận. Dẫu vậy, theo các nguồn thông tin y tế uy tín như Trung tâm Kiểm soát Dịch bệnh Hoa Kỳ và Hiệp hội Alzheimer, lượng nhôm phát tán từ giấy bạc trong quá trình nấu nướng là không đáng kể và không gây hại cho sức khỏe.
    Hơn nữa, nhôm vốn tồn tại tự nhiên trong đất, nước, thực vật, và một số phụ gia thực phẩm hoặc dược phẩm, chẳng hạn như thuốc aspirin, nhưng cơ thể con người có khả năng đào thải lượng nhôm nhỏ này một cách tự nhiên. Để đảm bảo an toàn, các chuyên gia khuyến nghị sử dụng giấy bạc ở nhiệt độ từ 200–220ºC và tránh dùng với các thực phẩm có tính axit mạnh, nhằm giảm thiểu nguy cơ phân tán nhôm dù ở mức tối thiểu.
    Về giấy nến, đây là loại giấy được xử lý đặc biệt để phù hợp với môi trường nhiệt độ cao. Giấy chống dính thông thường được xử lý bằng axit sulfuric để tạo bề mặt chống dính, có khả năng chịu nhiệt lên đến 200–220ºC, thường có màu nâu hoặc trắng đục sau khi tẩy trắng. Trong khi đó, giấy nến cao cấp được phủ thêm một lớp silicone, một loại polyme vô cơ bền nhiệt và trơ với thực phẩm, giúp chịu được nhiệt độ lên đến 250ºC. Nhờ đặc tính này, giấy nến trở thành lựa chọn lý tưởng cho nồi chiên không dầu và lò nướng, đảm bảo an toàn khi tiếp xúc với thực phẩm ở nhiệt độ cao. So với giấy chống dính, giấy nến được ưa chuộng hơn nhờ khả năng chịu nhiệt vượt trội và độ ổn định hóa học.
    Theo Tiến sĩ Tần, cả giấy bạc và giấy nến đều được đánh giá là an toàn khi sử dụng đúng cách trong nồi chiên không dầu. Tuy nhiên, người dùng cần lưu ý một số nguyên tắc để đảm bảo an toàn tối ưu. Với giấy bạc, nên tránh sử dụng ở nhiệt độ vượt quá 220ºC hoặc với thực phẩm có tính axit cao. Đối với giấy nến, cần chọn sản phẩm chất lượng từ các nhà sản xuất uy tín để đảm bảo lớp phủ silicone đạt tiêu chuẩn an toàn thực phẩm. Những hướng dẫn này không chỉ giúp người dùng yên tâm sử dụng nồi chiên không dầu mà còn góp phần nâng cao nhận thức về việc áp dụng các vật liệu an toàn trong nấu nướng, từ đó bảo vệ sức khỏe và duy trì chất lượng món ăn.`
];
const dictionary = {
    "an toàn": "安全",
    "giấy bạc": "铝箔纸",
    "giấy nến": "烘焙纸",
    "nồi chiên không dầu": "空气炸锅",
    "bối cảnh": "背景",
    "công cụ": "工具",
    "gian bếp": "厨房",
    "hiện đại": "现代",
    "gia đình": "家庭",
    "chống dính": "防粘",
    "thói quen": "习惯",
    "phổ biến": "普遍",
    "vật liệu": "材料",
    "hạn chế": "限制",
    "thực phẩm": "食品",
    "bám dính": "粘附",
    "đơn giản hóa": "简化",
    "quá trình": "过程",
    "vệ sinh": "清洁",
    "nấu nướng": "烹饪",
    "lo ngại": "担忧",
    "tiếp xúc": "接触",
    "nhiệt độ": "温度",
    "phát tán": "释放",
    "chất độc hại": "有害物质",
    "sức khỏe": "健康",
    "Tiến sĩ": "博士",
    "giảng viên": "讲师",
    "chuyên ngành": "专业",
    "Hóa vô cơ": "无机化学",
    "phân tích": "分析",
    "khoa học": "科学",
    "chi tiết": "详细",
    "người dùng": "用户",
    "chế tạo": "制造",
    "nhôm": "铝",
    "cán mỏng": "压薄",
    "thành phần": "成分",
    "sắt": "铁",
    "silicone": "硅胶",
    "độ bền": "耐用性",
    "cơ học": "机械",
    "khả năng": "能力",
    "chịu nhiệt": "耐热",
    "bọc": "包裹",
    "nướng": "烤",
    "lò": "烤箱",
    "than": "炭",
    "đựng": "盛放",
    "thức ăn": "食物",
    "nhà hàng": "餐厅",
    "quốc gia": "国家",
    "chế biến": "加工",
    "tính axit": "酸性",
    "cà chua": "番茄",
    "chanh": "柠檬",
    "giấm": "醋",
    "phân tán": "分散",
    "tích lũy": "积累",
    "cơ thể": "身体",
    "mất trí nhớ": "失智症",
    "bệnh thận": "肾脏疾病",
    "thông tin": "信息",
    "y tế": "医疗",
    "uy tín": "权威",
    "dịch bệnh": "流行病",
    "không đáng kể": "微不足道",
    "gây hại": "造成伤害",
    "tồn tại": "存在",
    "tự nhiên": "自然",
    "đất": "土壤",
    "nước": "水",
    "thực vật": "植物",
    "phụ gia": "添加剂",
    "dược phẩm": "药品",
    "aspirin": "阿司匹林",
    "đào thải": "排出",
    "khuyến nghị": "建议",
    "tránh": "避免",
    "tính axit mạnh": "强酸性",
    "giảm thiểu": "最小化",
    "tối thiểu": "最低",
    "xử lý": "处理",
    "đặc biệt": "特别",
    "môi trường": "环境",
    "axit sulfuric": "硫酸",
    "bề mặt": "表面",
    "tẩy trắng": "漂白",
    "nâu": "棕色",
    "trắng đục": "乳白色",
    "cao cấp": "高级",
    "lớp phủ": "涂层",
    "polymer": "聚合物",
    "trơ": "惰性",
    "lý tưởng": "理想",
    "lò nướng": "烤炉",
    "ưa chuộng": "受欢迎",
    "vượt trội": "卓越",
    "ổn định": "稳定",
    "hóa học": "化学",
    "đánh giá": "评估",
    "đúng cách": "正确方式",
    "nguyên tắc": "原则",
    "tối ưu": "最优",
    "vượt quá": "超过",
    "chất lượng": "质量",
    "nhà sản xuất": "生产商",
    "tiêu chuẩn": "标准",
    "hướng dẫn": "指南",
    "yên tâm": "放心",
    "nhận thức": "认知",
    "áp dụng": "应用",
    "bảo vệ": "保护",
    "duy trì": "维持",
    "chất lượng": "质量",
    "món ăn": "菜肴"
};
const quizData = [
    {
        question: "Lý do nào khiến giấy bạc có thể gây lo ngại khi nấu nướng ở nhiệt độ cao?",
        options: ["Vì nó dễ bắt lửa và gây cháy", "Vì nhôm trong giấy có thể bay hơi ở nhiệt độ thấp", "Vì một lượng nhôm nhỏ có thể phân tán vào thực phẩm có tính axit", "Vì giấy bạc không có khả năng chịu nhiệt như quảng cáo"],
        correct: "Vì một lượng nhôm nhỏ có thể phân tán vào thực phẩm có tính axit"
    },
    {
        question: "Theo bài viết, yếu tố nào sau đây không ảnh hưởng lớn đến sức khỏe khi dùng giấy bạc đúng cách?",
        options: ["Lượng nhôm phát tán ở mức thấp", "Việc tái sử dụng giấy bạc nhiều lần", "Tiếp xúc giữa nhôm và thực phẩm không có tính axit", "Nhiệt độ sử dụng nằm trong khoảng khuyến nghị"],
        correct: "Lượng nhôm phát tán ở mức thấp"
    },
    {
        question: "Điều gì giúp giấy nến cao cấp chịu được nhiệt độ cao hơn loại thường?",
        options: ["Nó được làm từ sợi thực vật tự nhiên", "Nó được phủ lớp silicone có tính ổn định và bền nhiệt", "Nó có độ dày lớn hơn gấp đôi giấy thường", "Nó chứa một lớp nhôm chống dính bên trong"],
        correct: "Nó được phủ lớp silicone có tính ổn định và bền nhiệt"
    },
    {
        question: "Câu nào dưới đây đúng nhất với thông điệp của Tiến sĩ Tần?",
        options: ["Không nên sử dụng bất kỳ loại giấy nào trong nồi chiên không dầu", "Giấy bạc và giấy nến đều có nguy cơ gây độc nếu dùng thường xuyên", "Việc sử dụng đúng cách là yếu tố quyết định mức độ an toàn của vật liệu", "Giấy bạc nguy hiểm hơn nhiều so với giấy nến, nên tránh hoàn toàn"],
        correct: "Việc sử dụng đúng cách là yếu tố quyết định mức độ an toàn của vật liệu"
    },
    {
        question: "Tại sao nên tránh dùng giấy bạc với thực phẩm có tính axit cao?",
        options: ["Vì axit có thể làm chảy lớp phủ silicone", "Vì phản ứng hóa học sẽ làm giảm hương vị món ăn", "Vì axit có thể làm tăng tốc độ phân tán nhôm vào thực phẩm", "Vì sẽ làm biến dạng bề mặt giấy bạc"],
        correct: "Vì axit có thể làm tăng tốc độ phân tán nhôm vào thực phẩm"
    },
    {
        question: "Tác giả đề cập đến giấy nến có màu trắng đục hoặc nâu để làm gì?",
        options: ["Phân biệt giữa giấy thật và giấy giả", "Cho biết màu sắc là dấu hiệu của quy trình xử lý", "Cảnh báo rằng giấy trắng là không an toàn", "Đề xuất sử dụng giấy màu để nấu món ngọt"],
        correct: "Cho biết màu sắc là dấu hiệu của quy trình xử lý"
    },
    {
        question: "Theo bài viết, lớp silicone trên giấy nến cao cấp có đặc điểm gì?",
        options: ["Gây độc nếu tiếp xúc lâu ngày với dầu mỡ", "Là chất hữu cơ có khả năng bị biến chất", "Là polyme vô cơ, trơ và chịu nhiệt tốt", "Dễ bị phân hủy khi nhiệt độ vượt quá 180ºC"],
        correct: "Là polyme vô cơ, trơ và chịu nhiệt tốt"
    },
    {
        question: "Tác giả nhấn mạnh vai trò của các nhà sản xuất uy tín trong việc gì?",
        options: ["Giảm giá thành sản phẩm giấy nến cao cấp", "Đảm bảo giấy nến có lớp phủ silicone đạt chuẩn an toàn", "Hạn chế quảng cáo sai lệch về nhiệt độ chịu đựng của giấy bạc", "Tạo ra sản phẩm thân thiện môi trường hơn"],
        correct: "Đảm bảo giấy nến có lớp phủ silicone đạt chuẩn an toàn"
    },
    {
        question: "Thông tin nào sau đây là sai theo nội dung văn bản?",
        options: ["Cả giấy bạc và giấy nến đều có thể dùng trong nồi chiên không dầu", "Giấy nến thường có khả năng chịu nhiệt cao hơn giấy bạc", "Cơ thể người không có khả năng đào thải nhôm", "Có thể dùng giấy bạc để bọc thực phẩm nướng trong lò"],
        correct: "Cơ thể người không có khả năng đào thải nhôm"
    },
    {
        question: "Việc nhắc đến các tổ chức như CDC và Hiệp hội Alzheimer nhằm mục đích gì?",
        options: ["Bổ sung dẫn chứng khoa học cho nhận định về độ an toàn của nhôm", "Minh họa tác hại chưa được nghiên cứu rõ của giấy bạc", "Thể hiện rằng chính phủ không quản lý chặt chẽ sản phẩm giấy bạc", "So sánh mức độ nguy hiểm giữa nhôm và các kim loại khác"],
        correct: "Bổ sung dẫn chứng khoa học cho nhận định về độ an toàn của nhôm"
    },
    {
        question: "Cụm từ “độ ổn định hóa học” trong đoạn cuối có thể hiểu gần nhất là gì?",
        options: ["Khó tan trong nước", "Không phản ứng với thực phẩm khi đun nóng", "Có thể tái sử dụng nhiều lần", "Dễ dàng hòa tan ở nhiệt độ cao"],
        correct: "Không phản ứng với thực phẩm khi đun nóng"
    },
    {
        question: "Chức năng tổng thể của bài viết là gì?",
        options: ["Cảnh báo nguy cơ sức khỏe khi dùng vật liệu nấu ăn không rõ nguồn gốc", "Hướng dẫn quy trình vệ sinh nồi chiên không dầu", "Phản biện việc sử dụng nồi chiên không dầu trong bếp hiện đại", "Giải thích cơ sở khoa học và đưa ra khuyến nghị an toàn khi dùng giấy bạc và giấy nến"],
        correct: "Giải thích cơ sở khoa học và đưa ra khuyến nghị an toàn khi dùng giấy bạc và giấy nến"
    }
];

        // Xử lý hiển thị văn bản với từ điển
        const content = document.getElementById('content');
        function renderText() {
            let html = textContentData[0].replace(/\n/g, "<br>");
            const sortedKeys = Object.keys(dictionary).sort((a, b) => b.length - a.length);
            sortedKeys.forEach(key => {
                const regex = new RegExp(`(^|\\s|[.,])(${key})(\\s|[.,]|$)`, 'g');
                html = html.replace(regex, `$1<span class="translated-word"><span class="translation">${dictionary[key]}</span><span class="original">$2</span></span>$3`);
            });
            content.innerHTML = html;
        }

        // Xử lý hiển thị ảnh
        const imageFrame = document.getElementById('imageFrame');
        const contentImage = document.getElementById('contentImage');
        const imageSrc = "anhminhhoa.jpg"; // Tên file ảnh cụ thể trong cùng thư mục
        function renderImage() {
            if (imageSrc) {
                contentImage.src = imageSrc;
                imageFrame.style.display = 'block';
            } else {
                imageFrame.style.display = 'none';
            }
        }

        // Gọi hàm renderText và renderImage khi khởi tạo
        renderText();
        renderImage();

        // Xử lý audio và bảng điều khiển
        const audioPlayer = document.getElementById("audioPlayer");
        const floatingControls = document.getElementById("floatingControls");
        const timeDisplay = floatingControls.querySelector("#timeDisplay");
        const loopStart = floatingControls.querySelector("#loopStart");
        const loopEnd = floatingControls.querySelector("#loopEnd");
        const loopButton = floatingControls.querySelector("#loopButton");
        const clearButton = floatingControls.querySelector("#clearButton");
        const rewind5sButton = floatingControls.querySelector("#rewind5sButton");
        const rewind1sButton = floatingControls.querySelector("#rewind1sButton");
        const forward1sButton = floatingControls.querySelector("#forward1sButton");
        const forward5sButton = floatingControls.querySelector("#forward5sButton");
        const pausePlayButton = floatingControls.querySelector("#pausePlayButton");
        const toggleControlsButton = floatingControls.querySelector("#toggleControlsButton");
        const tuaButtons = floatingControls.querySelector(".tua-buttons");

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimeDisplay(displayElement) {
            displayElement.textContent = formatTime(audioPlayer.currentTime);
        }

        let customLoopStart = null;
        let customLoopEnd = null;
        let clickCount = 0;
        let isLooping = false;

        const updateInterval = setInterval(() => updateTimeDisplay(timeDisplay), 1000);

        audioPlayer.ontimeupdate = function() {
            updateTimeDisplay(timeDisplay);
            if (isLooping && customLoopStart !== null && customLoopEnd !== null) {
                if (audioPlayer.currentTime >= customLoopEnd) {
                    audioPlayer.currentTime = customLoopStart;
                }
            }
        };

        timeDisplay.onclick = () => {
            if (audioPlayer.paused) {
                clickCount++;
                if (clickCount === 1) {
                    customLoopStart = audioPlayer.currentTime;
                    loopStart.textContent = formatTime(customLoopStart);
                } else if (clickCount === 2) {
                    customLoopEnd = audioPlayer.currentTime;
                    if (customLoopEnd <= customLoopStart) {
                        customLoopEnd = null;
                        loopEnd.textContent = "--:--";
                    } else {
                        loopEnd.textContent = formatTime(customLoopEnd);
                    }
                    clickCount = 0;
                }
            }
        };

        rewind5sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 5);
                updateTimeDisplay(timeDisplay);
            }
        };
        rewind1sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 1);
                updateTimeDisplay(timeDisplay);
            }
        };
        forward1sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 1);
                updateTimeDisplay(timeDisplay);
            }
        };
        forward5sButton.onclick = () => {
            if (!isLooping) {
                audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 5);
                updateTimeDisplay(timeDisplay);
            }
        };

        pausePlayButton.onclick = () => {
            if (audioPlayer.paused) {
                audioPlayer.play();
                pausePlayButton.textContent = "停";
            } else {
                audioPlayer.pause();
                pausePlayButton.textContent = "播";
            }
        };

        loopButton.onclick = () => {
            if (customLoopStart !== null && customLoopEnd !== null) {
                audioPlayer.currentTime = customLoopStart;
                audioPlayer.play();
                isLooping = true;
                rewind5sButton.disabled = true;
                rewind1sButton.disabled = true;
                forward1sButton.disabled = true;
                forward5sButton.disabled = true;
            }
        };

        clearButton.onclick = () => {
            customLoopStart = null;
            customLoopEnd = null;
            loopStart.textContent = "--:--";
            loopEnd.textContent = "--:--";
            clickCount = 0;
            isLooping = false;
            rewind5sButton.disabled = false;
            rewind1sButton.disabled = false;
            forward1sButton.disabled = false;
            forward5sButton.disabled = false;
        };

        let controlsVisible = true;
        toggleControlsButton.onclick = () => {
            if (controlsVisible) {
                timeDisplay.style.display = "none";
                tuaButtons.style.display = "none";
                pausePlayButton.style.display = "none";
                loopStart.style.display = "none";
                loopEnd.style.display = "none";
                loopButton.style.display = "none";
                clearButton.style.display = "none";
                toggleControlsButton.textContent = "示";
                controlsVisible = false;
            } else {
                timeDisplay.style.display = "inline-block";
                tuaButtons.style.display = "flex";
                pausePlayButton.style.display = "inline-flex";
                loopStart.style.display = "inline-block";
                loopEnd.style.display = "inline-block";
                loopButton.style.display = "inline-flex";
                clearButton.style.display = "inline-flex";
                toggleControlsButton.textContent = "藏";
                controlsVisible = true;
            }
        };

        audioPlayer.onpause = audioPlayer.onended = function() {
            pausePlayButton.textContent = "播";
        };

        // Biến lưu trữ vị trí cuộn và lựa chọn
        let contentScrollPosition = 0;
        let quizScrollPosition = 0;
        let userSelections = {};
        let isSubmitted = false;

        // Hiển thị câu hỏi và khôi phục lựa chọn
        function loadQuiz() {
            const questionsDiv = document.getElementById('questions');
            questionsDiv.innerHTML = '';
            quizData.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                const questionTitle = document.createElement('h3');
                questionTitle.textContent = `Câu ${index + 1}: ${item.question}`;
                questionDiv.appendChild(questionTitle);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                
                item.options.forEach(option => {
                    const label = document.createElement('label');
                    const isChecked = userSelections[`question${index}`] === option ? 'checked' : '';
                    label.innerHTML = `
                        <input type="radio" name="question${index}" value="${option}" ${isChecked}>
                        ${option}
                    `;
                    optionsDiv.appendChild(label);
                });

                questionDiv.appendChild(optionsDiv);
                questionsDiv.appendChild(questionDiv);
            });

            // Khôi phục vị trí cuộn
            window.scrollTo(0, quizScrollPosition);
        }

        // Lưu lựa chọn của người dùng
        function saveSelections() {
            quizData.forEach((_, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    userSelections[`question${index}`] = selected.value;
                }
            });
        }

        // Kiểm tra đáp án
        function checkAnswers() {
            let score = 0;
            const total = quizData.length;
            let wrongAnswers = [];
            
            quizData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    if (selected.value === item.correct) {
                        score++;
                    } else {
                        wrongAnswers.push({
                            question: item.question,
                            selected: selected.value,
                            correct: item.correct
                        });
                    }
                } else {
                    wrongAnswers.push({
                        question: item.question,
                        selected: "未选择",
                        correct: item.correct
                    });
                }
            });

            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h3>YD4-结果: ${score}/${total} 答案正确</h3>
                <p>比例: ${(score/total * 100).toFixed(2)}%</p>
            `;

            if (wrongAnswers.length > 0) {
                resultDiv.innerHTML += '<h4>错误答案:</h4>';
                wrongAnswers.forEach((wrong, index) => {
                    resultDiv.innerHTML += `
                        <div class="wrong-answer">
                            Câu ${quizData.findIndex(q => q.question === wrong.question) + 1}: ${wrong.question}<br>
                            你的选择: ${wrong.selected} - 正确答案: ${wrong.correct}
                        </div>
                    `;
                });
            } else {
                resultDiv.innerHTML += '<p>回答正确所有问题</p>';
            }

            resultDiv.scrollIntoView({ behavior: 'smooth' });
            isSubmitted = true; // Đánh dấu đã nộp bài
        }

        // Xử lý chế độ hiển thị
        const contentModeButton = document.getElementById('contentMode');
        const quizModeButton = document.getElementById('quizMode');
        const contentContainer = document.getElementById('contentContainer');
        const quizContainer = document.getElementById('quizContainer');

        contentModeButton.addEventListener('click', () => {
            // Lưu vị trí cuộn của quiz trước khi chuyển
            quizScrollPosition = window.scrollY;
            saveSelections(); // Lưu lựa chọn của người dùng
            
            contentContainer.style.display = 'block';
            quizContainer.style.display = 'none';
            contentModeButton.classList.add('active');
            quizModeButton.classList.remove('active');
            floatingControls.style.display = 'block';
            renderText();
            renderImage();
            
            // Khôi phục vị trí cuộn của content
            window.scrollTo(0, contentScrollPosition);
        });

        quizModeButton.addEventListener('click', () => {
            // Lưu vị trí cuộn của content trước khi chuyển
            contentScrollPosition = window.scrollY;
            saveSelections(); // Lưu lựa chọn của người dùng
            
            contentContainer.style.display = 'none';
            quizContainer.style.display = 'block';
            quizModeButton.classList.add('active');
            contentModeButton.classList.remove('active');
            floatingControls.style.display = 'none';
            
            // Reset lựa chọn nếu đã nộp bài
            if (isSubmitted) {
                userSelections = {};
                isSubmitted = false;
            }
            
            loadQuiz();
        });

        // Mặc định hiển thị nội dung
        contentContainer.style.display = 'block';
        quizContainer.style.display = 'none';
    </script>
</body>
</html>
